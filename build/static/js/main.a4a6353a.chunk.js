(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(16),o=n.n(s),a=(n(21),n(7)),u=n(3),i=n(0),l=function(e){var t=e.filterBy,n=e.handleFilter;return Object(i.jsxs)("label",{htmlFor:"filter",children:["Filter shown with:",Object(i.jsx)("input",{id:"filter",type:"text",value:t,onChange:n})]})},d=function(e){var t=e.handleSubmit,n=e.newName,r=e.newNumber,c=e.handleNewName,s=e.handleNewNumber;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{value:n,onChange:c})]}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{value:r,onChange:s})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var t=e.filteredPeople,n=e.deletePerson;return Object(i.jsx)("div",{children:t.map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number,Object(i.jsx)("button",{type:"button",onClick:function(){return n(e.id)},children:"delete"})]},e.name)}))})},f=(n(23),function(e){var t=e.message,n=e.type;return null===t?null:Object(i.jsx)("p",{className:"msg msg-".concat(n),children:t})}),j=n(4),m=n.n(j),h="/api/persons",p={getNumbers:function(){return m.a.get(h).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},addPerson:function(e){return m.a.post(h,e).then((function(e){return e.data}))},updatePerson:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},O=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(u.a)(s,2),j=o[0],m=o[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),g=O[0],y=O[1],v=Object(r.useState)(""),x=Object(u.a)(v,2),w=x[0],N=x[1],P=Object(r.useState)(0),S=Object(u.a)(P,2),k=S[0],C=S[1],E=Object(r.useState)({message:null,type:""}),T=Object(u.a)(E,2),F=T[0],B=T[1];Object(r.useEffect)((function(){p.getNumbers().then((function(e){c(e),C(e.length)}))}),[]);var D=""!==w?n.filter((function(e){return e.name.toLowerCase().startsWith(w.toLowerCase())})):n;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(f,{message:F.message,type:F.type}),Object(i.jsx)(l,{filterBy:w,handleFilter:function(e){return N(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new:"}),Object(i.jsx)(d,{newName:j,newNumber:g,handleNewName:function(e){return m(e.target.value)},handleNewNumber:function(e){return y(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===j}));if(t){window.confirm("".concat(t.name," is already added to phonebook. Update person's number?"))&&p.updatePerson(t.id,Object(a.a)(Object(a.a)({},t),{},{number:g})).then((function(e){c(n.filter((function(e){return e!==t})).concat(e)),m(""),y(""),B({message:"Person successfully updated.",type:"success"}),setTimeout((function(){B({message:null,type:""})}),3e3)})).catch((function(e){console.error("Error updating person.\n".concat(e)),B({message:"Error updating person. Person not in database.",type:"error"}),setTimeout((function(){B({message:null,type:""})}),3e3)}))}else{var r={id:k+1,name:j,number:g};p.addPerson(r).then((function(e){c(n.concat(e)),m(""),y(""),C(k+1),B({message:"Person successfully added.",type:"success"}),setTimeout((function(){B({message:null,type:""})}),3e3)})).catch((function(e){return console.error("Error adding person.\n".concat(e))}))}}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(b,{filteredPeople:D,deletePerson:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&p.deletePerson(e).then((function(t){var r=n.filter((function(t){return t.id!==e}));c(r),B({message:"Person successfully deleted.",type:"success"}),setTimeout((function(){B({message:null,type:""})}),3e3)})).catch((function(e){console.log("Error deleting person.\n".concat(e)),c(n.filter((function(e){return e.id!==t.id}))),B({message:"Person already removed from database. Refreshing list.",type:"error"}),setTimeout((function(){B({message:null,type:""})}),5e3)}))}})]})};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(O,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a4a6353a.chunk.js.map